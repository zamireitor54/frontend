<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Fotogr√°fico de Inspecci√≥n</title>
    <script src="index.umd.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="info-modal.css">
</head>
<body>
    <div class="container">
        <button class="info-btn" id="infoBtn" title="¬øQu√© hace esta aplicaci√≥n?">?</button>
        <div class="header">
            <h1 style="font-family: Tahoma, Arial, sans-serif;">REPORTE FOTOGR√ÅFICO DE INSPECCI√ìN</h1>
            <div class="convenciones-block">
                <div class="convenciones-titulo">Convenciones:</div>
                <div class="convenciones-list">
                    <div class="convencion-item"><img src="verde.png.jpg" class="estado-icono" alt="Verde" /> Buen estado</div>
                    <div class="convencion-item"><img src="amarillo.png.avif" class="estado-icono" alt="Amarillo" /> Observaciones de mejora</div>
                    <div class="convencion-item"><img src="rojo.png.avif" class="estado-icono" alt="Rojo" /> No conformidad. Requiere intervenci√≥n.</div>
                </div>
            </div>
        </div>

        <div class="upload-section">
            <div class="upload-section-inner">
                <div id="imageInputWrapper" class="main-btn">
                    <label for="imageInput">
                        üì∑ Seleccionar Im√°genes
                        <input type="file" multiple accept="image/*" id="imageInput" style="display:none;">
                    </label>
                </div>
                <button id="clearBtn" class="main-btn" type="button">
                    üßπ Limpiar
                </button>
                <button id="quickStateBtn" class="main-btn" type="button">
                    ‚ö° Selecci√≥n r√°pida de estado
                </button>
            </div>
            <div class="loading" id="loadingText">Procesando im√°genes...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="content">
            <div id="gridContainer" class="image-grid"></div>
        </div>

        <div class="generate-section">
            <button class="generate-btn" id="generateBtn" onclick="generateWord()">
                üìÑ Generar Reporte Word
            </button>
        </div>
    </div>

    <div id="cropperModal" class="cropper-modal" style="display:none;">
        <div class="cropper-container">
            <canvas id="cropperCanvas"></canvas>
            <div class="cropper-btns">
                <button id="cropperOkBtn">Recortar</button>
                <button class="cancel" id="cropperCancelBtn">Cancelar</button>
            </div>
        </div>
    </div>
    <footer class="footer">
        Dise√±ado por <span>Zamir Pab√≥n</span> | Empresa Familiar &copy; 2025<br>
        <span style="font-size:0.98rem;color:#fff;opacity:0.7;">Esta aplicaci√≥n genera reportes fotogr√°ficos de inspecci√≥n en Word. Pr√≥ximamente: m√°s formatos y funciones.</span>
    </footer>
    <!-- Modal de info -->
    <div id="infoModal" class="info-modal-bg" style="display:none;">
      <div class="info-modal-content">
        <button class="close-info-btn" id="closeInfoBtn" title="Cerrar">√ó</button>
        <h2 style="text-align:center;margin-bottom:18px;color:#2980b9;letter-spacing:0.5px;">¬øQu√© hace esta aplicaci√≥n?</h2>
        <div class="info-slider">
          <button class="info-arrow left" id="infoPrevBtn" title="Anterior" aria-label="Anterior">&#60;</button>
          <div class="info-slide active" id="infoSlide0">
            <div class="info-card">
              <h3>Descripci√≥n general</h3>
              <p style="font-size:1.08rem;line-height:1.6;margin-bottom:10px;">
                Esta aplicaci√≥n te permite crear reportes fotogr√°ficos de inspecci√≥n de manera r√°pida y profesional. Sube im√°genes, as√≠gnales un estado, ord√©nalas y genera un documento Word listo para compartir.<br><br>
                <b>Ideal para empresas, t√©cnicos y supervisores que buscan eficiencia y claridad en sus reportes.</b>
              </p>
              <p style="color:#e67e22;font-weight:bold;">Pr√≥ximamente: nuevos dise√±os de Word, exportaci√≥n a PDF y m√°s opciones de personalizaci√≥n.</p>
            </div>
          </div>
          <div class="info-slide" id="infoSlide1">
            <div class="info-card">
              <h3>Actualizaci√≥n 1</h3>
              <ul>
                <li>Ahora puedes subir im√°genes de forma mucho m√°s sencilla y directa.</li>
                <li>Se agreg√≥ un bot√≥n para limpiar la selecci√≥n r√°pidamente.</li>
                <li>Antes, si recargabas la p√°gina, perd√≠as todo lo que hab√≠as hecho. Eso ya no pasa: la informaci√≥n se conserva.</li>
              </ul>
            </div>
          </div>
          <div class="info-slide" id="infoSlide2">
            <div class="info-card">
              <h3>Actualizaci√≥n 2</h3>
              <ul>
                <li>Se incorpor√≥ la opci√≥n de recortar im√°genes antes de agregarlas al reporte.</li>
                <li>Ahora puedes mover im√°genes entre casillas o eliminarlas f√°cilmente.</li>
                <li>La carga de im√°genes es mucho m√°s r√°pida y estable.</li>
              </ul>
            </div>
          </div>
          <div class="info-slide" id="infoSlide3">
            <div class="info-card">
              <h3>Actualizaci√≥n 3</h3>
              <ul>
                <li>Nueva herramienta para seleccionar estados con un solo clic.</li>
                <li>Puedes aplicar el mismo estado a todas las im√°genes de una vez.</li>
                <li>Ahora puedes definir desde qu√© n√∫mero empieza la numeraci√≥n de las im√°genes (y se guarda autom√°ticamente).</li>
                <li>Ya no hay un l√≠mite de im√°genes: puedes subir tantas como necesites.</li>
                <li>Se mejor√≥ el dise√±o visual del grid para que sea m√°s claro y ordenado.</li>
              </ul>
            </div>
          </div>
          <button class="info-arrow right" id="infoNextBtn" title="Siguiente" aria-label="Siguiente">&#62;</button>
        </div>
        <div class="info-dots" id="infoDots"></div>
      </div>
    </div>
    <script src="script.js"></script>
    <script>
(function(){
  var infoBtn = document.getElementById('infoBtn');
  var infoModal = document.getElementById('infoModal');
  var closeBtn = document.getElementById('closeInfoBtn');
  var prevBtn, nextBtn, dots;
  var current = 0;
  var slides;

  function getSlides() {
    // Solo selecciona slides hijos directos de .info-slider para evitar problemas de anidaci√≥n
    var slider = document.querySelector('.info-slider');
    return Array.from(slider.querySelectorAll('.info-slide'));
  }

  function showSlide(n) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === n);
    });
    current = n;
    if (prevBtn && nextBtn) {
      prevBtn.disabled = (n === 0);
      nextBtn.disabled = (n === slides.length - 1);
    }
    if (dots) {
      dots.querySelectorAll('.dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === n);
      });
    }
  }

  function goPrev() {
    if (current > 0) showSlide(current - 1);
  }
  function goNext() {
    if (current < slides.length - 1) showSlide(current + 1);
  }

  function setupArrows() {
    prevBtn = document.getElementById('infoPrevBtn');
    nextBtn = document.getElementById('infoNextBtn');
    if (prevBtn && nextBtn) {
      prevBtn.onclick = goPrev;
      nextBtn.onclick = goNext;
    }
  }

  function setupDots() {
    dots = document.getElementById('infoDots');
    if (dots) {
      dots.innerHTML = '';
      slides.forEach((_, i) => {
        var dot = document.createElement('span');
        dot.className = 'dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', function(){ showSlide(i); });
        dots.appendChild(dot);
      });
    }
  }

  if(infoBtn && infoModal) {
    infoBtn.addEventListener('click', function() {
      infoModal.style.display = 'flex';
      setTimeout(function(){
        slides = getSlides();
        setupArrows();
        setupDots();
        showSlide(0);
      }, 50);
    });
  }
  if(closeBtn && infoModal) {
    closeBtn.addEventListener('click', function() {
      infoModal.style.display = 'none';
    });
  }
  window.addEventListener('click', function(e){
    if(e.target === infoModal) infoModal.style.display = 'none';
  });
})();
    </script>
  </body>
</html>
